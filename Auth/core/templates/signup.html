{% load static %}
{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up - Healthcare Platform</title>
  {% tailwind_css %}
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    .float-animation {
      animation: float 6s ease-in-out infinite;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .slide-in {
      animation: slideIn 0.6s ease-out;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 py-8 px-4 relative overflow-x-hidden">
  
  <!-- Animated background circles -->
  <div class="fixed top-20 left-10 w-72 h-72 bg-white rounded-full mix-blend-overlay filter blur-xl opacity-20 float-animation pointer-events-none"></div>
  <div class="fixed top-40 right-10 w-72 h-72 bg-white rounded-full mix-blend-overlay filter blur-xl opacity-20 float-animation pointer-events-none" style="animation-delay: 2s;"></div>
  <div class="fixed bottom-20 left-1/2 w-72 h-72 bg-white rounded-full mix-blend-overlay filter blur-xl opacity-20 float-animation pointer-events-none" style="animation-delay: 4s;"></div>

  <div class="w-full max-w-5xl mx-auto relative z-10 slide-in">
    <div class="bg-white/95 backdrop-blur-lg shadow-2xl rounded-3xl overflow-hidden">
      
      <!-- Header Section -->
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-center">
        <div class="w-20 h-20 bg-white rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg">
          <svg class="w-12 h-12 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
        </div>
        <h2 class="text-4xl font-bold text-white mb-2">Create Your Account</h2>
        <p class="text-indigo-100">Join our healthcare community today</p>
      </div>

      <!-- Form Section -->
      <div class="p-8 md:p-12">
        <form method="POST" enctype="multipart/form-data" class="space-y-8">
          {% csrf_token %}
          
          <!-- Display non-field errors -->
          {% if form.non_field_errors %}
            <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
              <div class="flex">
                <svg class="w-5 h-5 text-red-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                <div class="text-red-700 text-sm">{{ form.non_field_errors }}</div>
              </div>
            </div>
          {% endif %}

          <!-- Personal Information Section -->
          <div class="border-b border-gray-200 pb-6">
            <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
              <span class="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-3 text-sm font-bold">1</span>
              Personal Information
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              {% for field in form %}
                {% if field.name != 'address_line1' and field.name != 'city' and field.name != 'state' and field.name != 'pincode' and field.name != 'profile_picture' and field.name != 'is_doctor' %}
                  <div class="{% if field.name == 'email' or field.name == 'username' %}md:col-span-1{% endif %}">
                    <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                      {{ field.label }}
                      {% if field.field.required %}
                        <span class="text-red-500">*</span>
                      {% endif %}
                    </label>
                    {% if field.field.widget.input_type == 'password' %}
                      <input type="password" 
                             name="{{ field.name }}"
                             id="{{ field.id_for_label }}"
                             class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if field.errors %}border-red-500{% endif %}"
                             placeholder="••••••••"
                             {% if field.field.required %}required{% endif %}>
                    {% elif field.field.widget.input_type == 'email' %}
                      <input type="email" 
                             name="{{ field.name }}"
                             id="{{ field.id_for_label }}"
                             class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if field.errors %}border-red-500{% endif %}"
                             placeholder="your.email@example.com"
                             {% if field.field.required %}required{% endif %}>
                    {% else %}
                      <input type="text" 
                             name="{{ field.name }}"
                             id="{{ field.id_for_label }}"
                             class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if field.errors %}border-red-500{% endif %}"
                             {% if field.field.required %}required{% endif %}>
                    {% endif %}
                    {% if field.errors %}
                      <p class="text-red-500 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        {{ field.errors.0 }}
                      </p>
                    {% endif %}
                    {% if field.help_text %}
                      <p class="text-gray-500 text-xs mt-1">{{ field.help_text|safe }}</p>
                    {% endif %}
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          </div>

          <!-- Profile & Role Section -->
          <div class="border-b border-gray-200 pb-6">
            <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
              <span class="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-3 text-sm font-bold">2</span>
              Profile & Role
            </h3>
            
            <!-- Profile Picture -->
            <div class="mb-6">
              <label for="{{ form.profile_picture.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                {{ form.profile_picture.label }}
                {% if form.profile_picture.field.required %}
                  <span class="text-red-500">*</span>
                {% endif %}
              </label>
              <div class="flex items-center space-x-6">
                <div class="w-24 h-24 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center shadow-lg flex-shrink-0">
                  <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                  </svg>
                </div>
                <div class="flex-1">
                  <label for="{{ form.profile_picture.id_for_label }}" class="cursor-pointer block">
                    <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-indigo-500 hover:bg-indigo-50 transition-all duration-200 {% if form.profile_picture.errors %}border-red-500{% endif %}">
                      <svg class="w-10 h-10 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                      </svg>
                      <p class="text-sm text-gray-600 font-medium">Click to upload or drag and drop</p>
                      <p class="text-xs text-gray-500 mt-1">PNG, JPG up to 5MB</p>
                    </div>
                  </label>
                  <input type="file"
                         name="{{ form.profile_picture.name }}"
                         id="{{ form.profile_picture.id_for_label }}"
                         accept=".jpg,.jpeg,.png"
                         class="hidden">
                  {% if form.profile_picture.errors %}
                    <p class="text-red-500 text-sm mt-2 flex items-center">
                      <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                      </svg>
                      {{ form.profile_picture.errors.0 }}
                    </p>
                  {% endif %}
                </div>
              </div>
            </div>

            <!-- Doctor Checkbox -->
            <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-xl border-2 border-indigo-200">
              <label for="{{ form.is_doctor.id_for_label }}" class="flex items-start cursor-pointer group">
                <div class="flex items-center h-6">
                  <input type="checkbox"
                         name="{{ form.is_doctor.name }}"
                         id="{{ form.is_doctor.id_for_label }}"
                         class="w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="ml-4">
                  <span class="text-base font-semibold text-gray-800 group-hover:text-indigo-600 transition-colors">{{ form.is_doctor.label }}</span>
                  <p class="text-sm text-gray-600 mt-1">Check this if you're a doctor or medical professional</p>
                </div>
              </label>
              {% if form.is_doctor.errors %}
                <p class="text-red-500 text-sm mt-2 flex items-center">
                  <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                  </svg>
                  {{ form.is_doctor.errors.0 }}
                </p>
              {% endif %}
            </div>
          </div>

          <!-- Address Section -->
          <div>
            <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
              <span class="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-3 text-sm font-bold">3</span>
              Address Information
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Address Line -->
              <div class="md:col-span-2">
                <label for="{{ form.address_line1.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                  {{ form.address_line1.label }}
                  {% if form.address_line1.field.required %}
                    <span class="text-red-500">*</span>
                  {% endif %}
                </label>
                <input type="text"
                       name="{{ form.address_line1.name }}"
                       id="{{ form.address_line1.id_for_label }}"
                       class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if form.address_line1.errors %}border-red-500{% endif %}"
                       placeholder="123 Main Street, Apt 4B"
                       {% if form.address_line1.field.required %}required{% endif %}>
                {% if form.address_line1.errors %}
                  <p class="text-red-500 text-sm mt-2 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    {{ form.address_line1.errors.0 }}
                  </p>
                {% endif %}
              </div>

              <!-- City -->
              <div>
                <label for="{{ form.city.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                  {{ form.city.label }}
                  {% if form.city.field.required %}
                    <span class="text-red-500">*</span>
                  {% endif %}
                </label>
                <input type="text"
                       name="{{ form.city.name }}"
                       id="{{ form.city.id_for_label }}"
                       class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if form.city.errors %}border-red-500{% endif %}"
                       placeholder="Mumbai"
                       {% if form.city.field.required %}required{% endif %}>
                {% if form.city.errors %}
                  <p class="text-red-500 text-sm mt-2 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    {{ form.city.errors.0 }}
                  </p>
                {% endif %}
              </div>

              <!-- State -->
              <div>
                <label for="{{ form.state.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                  {{ form.state.label }}
                  {% if form.state.field.required %}
                    <span class="text-red-500">*</span>
                  {% endif %}
                </label>
                <input type="text"
                       name="{{ form.state.name }}"
                       id="{{ form.state.id_for_label }}"
                       class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if form.state.errors %}border-red-500{% endif %}"
                       placeholder="Maharashtra"
                       {% if form.state.field.required %}required{% endif %}>
                {% if form.state.errors %}
                  <p class="text-red-500 text-sm mt-2 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    {{ form.state.errors.0 }}
                  </p>
                {% endif %}
              </div>

              <!-- Pincode -->
              <div class="md:col-span-2">
                <label for="{{ form.pincode.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                  {{ form.pincode.label }}
                  {% if form.pincode.field.required %}
                    <span class="text-red-500">*</span>
                  {% endif %}
                </label>
                <input type="text"
                       name="{{ form.pincode.name }}"
                       id="{{ form.pincode.id_for_label }}"
                       class="w-full border-2 border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 {% if form.pincode.errors %}border-red-500{% endif %}"
                       placeholder="400001"
                       {% if form.pincode.field.required %}required{% endif %}>
                {% if form.pincode.errors %}
                  <p class="text-red-500 text-sm mt-2 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    {{ form.pincode.errors.0 }}
                  </p>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="pt-6">
            <button type="submit"
                    class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
              Create Account
            </button>
          </div>
        </form>

        <!-- Login Link -->
        <div class="mt-8 text-center">
          <p class="text-gray-600">
            Already have an account?
            <a href="{% url 'accounts:login' %}" class="text-indigo-600 font-semibold hover:text-indigo-700 hover:underline transition-colors ml-1">Sign in</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Trust Indicators -->
    <div class="mt-8 mb-8 flex flex-wrap justify-center items-center gap-6 text-white text-sm">
      <div class="flex items-center">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
        </svg>
        Secure , Encrypted
      </div>
      <div class="flex items-center">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
        </svg>
        HIPAA Compliant
      </div>
      <div class="flex items-center">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
          <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
        </svg>
        24/7 Support
      </div>
    </div>
  </div>
</body>
</html>